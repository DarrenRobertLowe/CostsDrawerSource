<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-1</depth>
  <persistent>-1</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>guiColor     = MASTER.guiColor;

instance_deactivate_object(PREFERENCES);            // don't show by default
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>ds_list_destroy(menuItems);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// INTERACTION and DRAW MENU

//global.selected = itemID;
popup        = id;
popupWaiting = true;                                     // prevent other popups while we're doing this
/*
// WHEN MENU IS OPEN...
if  (global.menuSelected == id)
{
    // SETUP
    draw_set_font(font_GUI);
    draw_set_valign(fa_bottom);
    
    width  = 648;
    height = 529;
    
    var size    = ds_list_size(menuItems);
    var indent  = global.menuItemIndent;
    var margin  = global.textMargin;
    var height  = global.menuTextHeight;
    var width   = 0;
    var text    = "";
    var item    = 0;
    
    
    /// CLOSING THE PREFERENCES... ///
    if (mouse_check_button_pressed(mb_left))
    {
        instance_deactivate_object(itemContextMenu);                    // make the menu disappear
        global.menuSelected = 0;
    }
    
    
    
    // FIND THE WIDTH
    for(i=1; i&lt;size; i++)                                               // iterate through the menu
    {
        item  = ds_list_find_value(menuItems,i);                    
        
        // get the text from the string or first list item
        if !(is_string(item))                                           // if the item is a list rather than a string...
        {
            text = ds_list_find_value(item,0);                          // ...use the first item of the sublist as the title.
        }
        else                                                            // if item is a string...
        {
            text = string(item);                                        // ...set the menu text to that string
        }
        
        // get the width of that text
        if ( (string_width(text) + global.textMargin) &gt; width)          // if the width is wider than the rectangle area
        {
            width = (string_width(text) + global.textMargin);           // resize the rectangle area to fit
        }
    }
    
    
    
    
    
    ///// DRAW THE MENU /////
    draw_set_color(guiColor);
    
    // DRAW MENU AREA RECTANGLE
    draw_rectangle
    (
        (x - margin),                                           // x1
        y,                                                      // y1
        (x + indent + width + indent),                          // x2
        (y + (height * size-1)),                                // y2
        false                                                   // outline
    );                                                
    
    
    
    draw_set_color(c_black);
    draw_set_halign(fa_left);
    draw_set_valign(fa_top);
    
    
    
    // DRAW the MENU ITEMS TEXT
    for(i=0; i&lt;size; i++)
    {
        var item = ds_list_find_value(menuItems,i);                 // iterate (i) through the menu 
        
        // if item is a list
        if !(is_string(item))                                       // if it's not a string, it's a list
        {
            item = ds_list_find_value(item,0);                      // get the first entry of that list
            
            draw_text                                               // draw the first entry
            (
                (x + indent),                                       // x
                (y + (i * height)),                                 // y
                item                                                // text
            )
        }
        
        
        // if item is = "______"
        else if is_string(item) and (item == "break")           // if item is a "_______" break...
        {
            item = "_";                                         //
            while (string_width(item) &lt; width)                  // ...make length of "_____" as wide as widest item...
            {
                item += "_";                                    // ...and set the menu text to "_____" instead of "break"
            }
            
            draw_text                                           // draw text
            (
                (x + indent),                                   // x
                (y + (i * height)),                             // y
                item                                            // text
            )
        }
        
        
        // if item is a normal item
        else
        {
            if (item == "Paste")
            {
                if (itemID.editingDescription == false)
                {
                    draw_set_color(c_gray);
                    pasteGrayedOut = true;
                }
            }
            else
            {
                draw_set_color(c_black);
            }
            
            if  (item == "Delete Item")
            and (itemID.canDelete == false)
              then draw_set_color(c_gray);
            
        
            
            draw_text                                           // draw text
            (
                (x + indent),                                   // x
                (y + (i * height)),                             // y
                item                                            // text
            )
        }
    }





    //// SELECT A MENU ITEM ////
    for (i=0; i&lt;size; i++) 
    {
        item = ds_list_find_value(menuItems,i);         // iterate (i) through the menu 
        
        var x1 = x;
        var y1 = y + (height*i); 
        var x2 = x + indent + width + indent;
        var y2 = y + (height*i) + height;
        
        if  (item != "break")
        and (mouseOverArea(x1,y1,x2,y2))
        {
            // Grayed out Delete Item
            if  (item == "Delete Item")
            and (itemID.canDelete == false)
              then exit;
             
            
            draw_set_alpha(0.5);
            draw_set_color(c_blue);
            draw_rectangle(x1,y1,x2,y2,0);
            
            
            if (mouse_check_button_pressed(mb_left))
            {
                global.selected = itemID;
                
                // EDIT Field
                if (item = "Edit")
                {
                    global.selected = itemID;
                    itemID.selectedField = selectedField;
                }
                
                
                // DELETE ITEM
                if (itemID.canDelete == true)
                {
                    if (item == "Delete Item")
                    {
                        if ( show_question("Delete item?") )
                        {
                            global.selected = -1;
                            delete_item(itemID);
                            global.UNSAVED  = 0;
                        }
                    }
                }
                
                
                // CREATE NEW ITEM
                if (item == "Create New Item")
                {
                    BUTTON_CreateNewItem.alarm[0] = 1;
                }
                
                
                // INSERT NEW ITEM ABOVE
                if (item == "Insert Item Above")
                {
                    if (itemID.object_index == USER_ITEM)
                    {
                        var pos = ds_list_find_index(global.listOfItems,itemID);
                        insert_item(USER_ITEM,pos)
                    }
                    
                    if (itemID.object_index == INSTRUCTIONS_FEE_ITEM)
                    {
                        var pos = ds_list_find_index(global.LAST_PAGE_ITEMS,itemID);
                        insert_instructions_fee_item(INSTRUCTIONS_FEE_ITEM,pos)
                    }
                }
                
                
                // INSERT NEW ITEM BELOW
                if (item == "Insert Item Below")
                {
                    if (itemID.object_index == USER_ITEM)
                    {
                        var pos = ds_list_find_index(global.listOfItems,itemID);
                        insert_item(USER_ITEM,pos+1)
                    }
                    
                    if (itemID.object_index == INSTRUCTIONS_FEE_ITEM)
                    {
                        var pos = ds_list_find_index(global.LAST_PAGE_ITEMS,itemID);
                        insert_instructions_fee_item(INSTRUCTIONS_FEE_ITEM,pos+1)
                    }
                }
                
                
                
                // CUT Description Text
                if (item = "Cut Text")
                {
                    if  (selectedField = "description")
                    and (itemID.description != "")
                    {
                        clipboard_set_text(itemID.description);
                        itemID.description = "";
                        set_unsaved();
                        with (itemID)
                        {
                            confirmDescription(description);
                            global.selected     = id;
                            selectedField       = "description";
                            editingDescription  = false;
                        }
                    }
                }
                
                
                // COPY Description Text
                if (item = "Copy Text")
                {
                    if  (selectedField = "description")
                    and (itemID.description != "")
                    {
                        clipboard_set_text(itemID.description);
                    }
                }
                
                
                if  (item = "Paste")
                //and (pasteGrayedOut == false)
                {
                    with(itemID)
                    {
                        global.selected = id;
                        editingDescription  = true;
                        pasteText();
                        confirmDescription(workingString);
                    }
                }
                
            } // END OF CONTEXT MENU ITEM ACTIONS

        }
    }
}




reset_text();
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
