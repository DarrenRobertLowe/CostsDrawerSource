<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>1</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>field    = 5;                       // default to editing the description
fieldString = "description";
color    = global.highlightColor;   // no need to keep this as a global
margin   = 1;                       // distance of 2nd outline
item = -1;

var startY = y;
if (global.selected &gt; -1) {
    selected = global.selected;
    startY = selected.borderStartY;
}

var endY = y + (global.rowHeight);
if (global.selected &gt; -1) {
    selected = global.selected;
    endY = selected.borderEndY;
}

goToNextItem = false;

// description values
x1 = global.descriptionColumnX;
y1 = startY;
x2 = global.outlayColumnX;
y2 = endY;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// draw the cursor

//if in_view()
//{
if (global.PRINT_VIEW == false)
{
    selected = global.selected;
    
    if !is_undefined(selected)
    and (selected &gt; -1)
    and instance_exists(selected)
    {
        cursor_update_borders()
        
        draw_set_color(color);  // set in create event
        draw_rectangle(x1, y1, x2, y2, true);
        draw_rectangle(x1-margin, y1-margin, x2+margin, y2+margin, true);
        
        if ( selected.selectedField == "none") // if not currently editing a field
        {
            // Context menu button
            if ( keyboard_check_released(93) )
            or ( keyboard_check(vk_shift) and keyboard_check_pressed(121) )
            {
                activateContextMenu(selected,fieldString,false);
            }
        }
    }
}
//}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="40">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// select next item
goToNextItem = false;

selected = global.selected;

if  exists(selected)
{
    // don't allow movement in these cases...
    if (find_list(selected) == global.LAST_PAGE_ITEMS)
    {
        var list    = global.LAST_PAGE_ITEMS;
        var lstart  = ds_list_find_index(list, GENERAL_INSTRUCTIONS_FEE);
        var lend    = ds_list_find_index(list, INSTRUCTIONS_FEE_TOTAL);
        
        if  (ds_list_find_index(list,selected) &lt;= lstart)
        and (ds_list_find_index(list,selected) &gt;= lend)
          then exit;
    }
    
    if (selected.selectedField == "none")  // this means we're not editing a field
    {
        if (field == 1) or (field == 2)
          then field++;
          else goToNextItem = true;
        
        var list = find_list(selected)
            
        if (list &gt; -1)
        {
            // now we make sure there is an item to move to
            if (goToNextItem == true)
            {
                if (field == 2) or (field == 3)
                  then field = 1;
                
                var index       = ds_list_find_index(list,selected);
                var lastIndex   = (ds_list_size(list)-1)
                
                // if we're at the end of listOfItems, move to start of LAST_PAGE_ITEMS.
                
                if (index+1 &gt;= lastIndex)
                {
                    list  = global.LAST_PAGE_ITEMS;
                    lastIndex = ds_list_size(list);
                    index = 0;
                }
                
                /*
                if ( (index+1) &gt;= lastIndex )
                {
                    if (list == global.listOfItems)
                    {
                        list = global.LAST_PAGE_ITEMS;
                        index = 0;
                    }
                }
                */
                
                /// iterate through the list to find the next valid item
                for(i=(index+1); i&lt;lastIndex; i++)
                {
                    var nextItem = ds_list_find_value(list,i);
                    
                    if  !(is_undefined(nextItem))
                    and (instance_exists(nextItem))
                    and (nextItem.object_index != PAGE_NUMBER)
                    and (nextItem.object_index != TOTALS)
                    {
                        global.selected = ds_list_find_value(list,i);
                        
                        if (global.selected.object_index == BUTTON_CreateNewItem)
                        {
                            field = 0;
                        }
                        
                        selected = global.selected;
                        selected.selectedField = "none";
                        if (field == 1)  and (selected.hasYear  == false)            then field = 0;
                        if (field == 2)  and (selected.hasMonth == false)            then field = 1;
                        if (field == 3)  and (selected.hasDay   == false)            then field = 2;
                        if (field == 4)  and (selected.canToggleItemNumber == false) then field = 3;
                        if (field == 5)  and (selected.hasDescription == false)      then field = 4;
                        if (field == 6)  and (selected.hasOutlay == false)           then field = 5;
                        if (field == 7)  and (selected.hasProfessional == false)     then field = 6;
                        
                        if (selected.object_index == BUTTON_CreateNewItem)
                        {
                            field = 5;
                        }
                        
                        break;
                    }
                }
            }
        }
    
    
    cursor_update_borders();
    cursor_check_view();
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="39">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// move cursor right to next field
selected = global.selected;

if  exists(selected)
{
    // don't allow movement in these cases...
    //if  find_list(selected) != global.listOfItems
    //then exit;
    
    if ((global.selected).selectedField == "none")
    {
            // move to next field
            field ++;
            
            if (field == 1) and (selected.hasYear == false)         then field = 2;
            if (field == 2) and (selected.hasMonth == false)        then field = 3;
            if (field == 3) and (selected.hasDay == false)          then field = 4;
            if (field == 4) and (selected.canToggleItemNumber == false) then field = 5;
            if (field == 5) and (selected.hasDescription == false)  then field = 6;
            if (field == 6) and (selected.hasOutlay == false)       then field = 7;
            if (field == 7) and (selected.hasProfessional == false) then field = 0;
            if (field == 8) then field = 0;
            if ( selected.object_index == BUTTON_CreateNewItem )    then field = 5;
            
            cursor_update_borders();
            cursor_check_view();
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="38">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// select previous item
selected = global.selected;

if exists(selected)
{
    // don't allow movement in these cases...
    if (find_list(selected) == global.LAST_PAGE_ITEMS)
    {
        var list    = global.LAST_PAGE_ITEMS;
        var lstart  = ds_list_find_index(list, GENERAL_INSTRUCTIONS_FEE);
        var lend    = ds_list_find_index(list, INSTRUCTIONS_FEE_TOTAL);
        
        if  (ds_list_find_index(list,selected) &lt;= lstart)
        and (ds_list_find_index(list,selected) &gt;= lend)
          then exit;
    }
    
    if (selected.selectedField == "none") // if nothing is currently being edited
    or (selected.selectedField == "")
    {
        if (field == 2)       
        or (field == 3)     // if it's the MONTH or DAY field we're on...
          then field --;    // change the field instead of the item
        
        else                // with any other field...
        {
            var list = find_list(selected)
            
            if (list &gt; -1)
            {
                var index = ds_list_find_index(list,selected);
                
                // if we're at the beginning of LAST_PAGE_ITEMS, move to end of listOfItems.
                if ((index-1) &lt;= 0)
                {
                    if (list == global.LAST_PAGE_ITEMS)
                    {
                        list = global.listOfItems;
                        index = ds_list_size(list);
                    }
                }
                
                /// iterate through the list to find the previous valid item
                for(i=(index-1); i&gt;0; i--)
                {
                    var item = ds_list_find_value(list,i);
           
                    if  ( exists(item) )
                    and (item.object_index != PAGE_NUMBER)  // exclude these
                    and (item.object_index != TOTALS)
                    {
                        global.selected = ds_list_find_value(list,i)
                        
                        selected = global.selected;
                        selected.selectedField = "none";
                        
                        if (field == 1)  and (selected.hasYear  == false)            then field = 0;
                        if (field == 2)  and (selected.hasMonth == false)            then field = 1;
                        if (field == 3)  and (selected.hasDay   == false)            then field = 2;
                        if (field == 4)  and (selected.canToggleItemNumber == false) then field = 3;
                        if (field == 5)  and (selected.hasDescription == false)      then field = 4;
                        if (field == 6)  and (selected.hasOutlay == false)           then field = 5;
                        if (field == 7)  and (selected.hasProfessional == false)     then field = 6;
                        
                        cursor_find_field_up();
                        cursor_update_borders();
                        cursor_check_view();
                        break;
                    }
                }
            }
        }
        
        cursor_update_borders();
        cursor_check_view();
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="37">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// move cursor left to the previous field
selected = global.selected;

if  exists(selected)
{
    // don't allow movement in these cases...
    //if  find_list(selected) != global.listOfItems
    //then exit;
    
    if ( (global.selected).selectedField == "none" )
    {
            // move to previous field
            field --;

            if (field == -1) then field = 7;
            if (field == 7)  and (selected.hasProfessional == false)     then field = 6;
            if (field == 6)  and (selected.hasOutlay == false)           then field = 5;
            if (field == 5)  and (selected.hasDescription == false)      then field = 4;
            if (field == 4)  and (selected.canToggleItemNumber == false) then field = 3;
            if (field == 3)  and (selected.hasDay == false)              then field = 2;
            if (field == 2)  and (selected.hasMonth == false)            then field = 1;
            if (field == 1)  and (selected.hasYear == false)             then field = 0;
            
            if ( selected.object_index == BUTTON_CreateNewItem )         then field = 5;

            cursor_update_borders();
            cursor_check_view();
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="10" enumb="13">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Edit the field
selected = global.selected;

if exists(selected)
{
    if ( (selected).selectedField == "none" ) // if we're not currently editing an item's fields
    {
        var item = selected;
        
        if  (fieldString  == "year")
        and (item.hasYear == true)
        {
            item.selectedField = fieldString;   // e.g. "date", "description", etc.
        }
        
        if  (fieldString  == "month")
        and (item.hasMonth == true)
        {
            item.selectedField = fieldString;   // e.g. "date", "description", etc.
        }

        if  (fieldString == "day")
        and (item.hasDay == true)
        {
            item.selectedField = fieldString;   // e.g. "date", "description", etc.
        }
        
        if  (fieldString == "item number")
        and (item.canToggleItemNumber == true)
        {
            item.selectedField = fieldString;   // e.g. "date", "description", etc.
        }
        
        if  (fieldString == "description")
        and (item.hasDescription == true)
        {
            item.selectedField = fieldString;   // e.g. "date", "description", etc.
        }
        
        if  (fieldString == "outlay")
        and (item.hasOutlay == true)
        {
            item.selectedField = fieldString;   // e.g. "date", "description", etc.
        }
        
        if  (fieldString == "professional")
        and (item.hasProfessional == true)
        {
            item.selectedField = fieldString;   // e.g. "date", "description", etc.
        }
        
        
        cursor_check_view();
        keyboard_key_release(vk_enter);     // clear the keyboard
        keyboard_clear(vk_enter);
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
